<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Goal Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Daily Goal Tracker</h1>

        <div class="goal-input">
            <input type="text" id="goalInput" placeholder="Enter your goal...">
            <button onclick="addGoal()">Add Goal</button>
        </div>

        <div class="goals-list" id="goalsList">
            <!-- Goals will be added here -->
        </div>

        <div class="progress-section">
            <h3>Today's Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="progress-text" id="progressText">0 of 0 goals completed</p>
        </div>
    </div>

    <script>
        let goals = [];

        function saveGoals() {
            localStorage.setItem('dailyGoals', JSON.stringify(goals));
        }

        function loadGoals() {
            const saved = localStorage.getItem('dailyGoals');
            if (saved) {
                goals = JSON.parse(saved);
                renderGoals();
            }
        }

        function addGoal() {
            const input = document.getElementById('goalInput');
            const text = input.value.trim();

            if (text) {
                goals.push({ text, completed: false });
                input.value = '';
                renderGoals();
            }
        }

        document.getElementById('goalInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') addGoal();
        });

        function toggleGoal(index) {
            goals[index].completed = !goals[index].completed;
            renderGoals();
        }

        function deleteGoal(index) {
            goals.splice(index, 1);
            renderGoals();
        }

        function editGoal(index) {
            const list = document.getElementById('goalsList');
            const goalItem = list.children[index];
            const textSpan = goalItem.querySelector('.goal-text');
            const currentText = goals[index].text;

            textSpan.innerHTML = `<input type="text" class="edit-input" value="${currentText}"
                onblur="saveEdit(${index}, this.value)"
                onkeydown="handleEditKey(event, ${index}, this)">`;

            const editInput = textSpan.querySelector('.edit-input');
            editInput.focus();
            editInput.select();
        }

        function handleEditKey(event, index, input) {
            if (event.key === 'Enter') {
                input.blur();
            } else if (event.key === 'Escape') {
                renderGoals();
            }
        }

        function saveEdit(index, newText) {
            const trimmed = newText.trim();
            if (trimmed) {
                goals[index].text = trimmed;
            }
            renderGoals();
        }

        function renderGoals() {
            const list = document.getElementById('goalsList');
            list.innerHTML = goals.map((goal, index) => `
                <div class="goal-item ${goal.completed ? 'completed' : ''}">
                    <input type="checkbox" ${goal.completed ? 'checked' : ''}
                           onchange="toggleGoal(${index})">
                    <span class="goal-text" ondblclick="editGoal(${index})">${goal.text}</span>
                    <button class="delete-btn" onclick="deleteGoal(${index})">Ã—</button>
                </div>
            `).join('');

            saveGoals();
            updateProgress();
        }

        function updateProgress() {
            const total = goals.length;
            const completed = goals.filter(g => g.completed).length;
            const percentage = total ? (completed / total) * 100 : 0;

            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent =
                `${completed} of ${total} goals completed`;
        }

        loadGoals();
    </script>
</body>
</html>
